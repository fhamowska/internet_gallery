<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artworks Gallery</title>
</head>
<body>
<h1>Artworks Gallery</h1>
<div class="filter">
    <form action="gallery.php{% if filters %}?{% endif %}{% for key, value in filters %}{% if value is not empty %}{{ key }}={{ value }}&{% endif %}{% endfor %}" method="GET">
        <label for="searchTerm">Search:</label>
        <input type="text" name="searchTerm" id="searchTerm" value="{{ filters.searchTerm ?? '' }}">

        <label for="genre">Genre:</label>
        <select name="genre" id="genre">
            <option value="">Select Genre</option>
            {% for genre in genres %}
                <option value="{{ genre.id }}" {% if filters.genre == genre.id %} selected {% endif %}>{{ genre.name }}</option>
            {% endfor %}
        </select>

        <label for="creationYearFrom">Creation Year From:</label>
        <input type="number" name="creationYearFrom" id="creationYearFrom" min="0" value="{{ filters.creationYearFrom ?? '' }}">

        <label for="creationYearTo">Creation Year To:</label>
        <input type="number" name="creationYearTo" id="creationYearTo" min="0" value="{{ filters.creationYearTo ?? '' }}">

        <button type="submit">Apply Filters</button>
    </form>
</div>

<div class="applied-filters">
    {% if filters %}
        <p>Applied Filters:</p>
        <ul>
            {% for key, value in filters %}
                {% if value is not empty %}
                    <li>{{ key }}: {{ value }}</li>
                {% endif %}
            {% endfor %}
        </ul>
    {% endif %}
</div>

<div class="gallery">
    {% if artworks %}
        <ul>
            {% for artwork in artworks %}
                <li>
                    <h2>{{ artwork.title }}</h2>
                    <p>Artist: {{ artwork.artistName }}</p>
                    <p>Genre: {{ artwork.genreName }}</p>
                    <p>Creation Year: {{ artwork.creationYear }}</p>
                    <p>Dimensions: {{ artwork.dimensions }}</p>
                    <img src="{{ artwork.imagePath }}" alt="Artwork Image">
                </li>
            {% endfor %}
        </ul>
        {% if currentPage > 1 %}
            <a href="?page={{ currentPage - 1 }}{% if filters.genre %}&genre={{ filters.genre }}{% endif %}{% if filters.creationYearFrom %}&creationYearFrom={{ filters.creationYearFrom }}{% endif %}{% if filters.creationYearTo %}&creationYearTo={{ filters.creationYearTo }}{% endif %}{% if filters.searchTerm %}&searchTerm={{ filters.searchTerm }}{% endif %}">Previous</a>
        {% endif %}

        {% if currentPage < totalPages %}
            <a href="?page={{ currentPage + 1 }}{% if filters.genre %}&genre={{ filters.genre }}{% endif %}{% if filters.creationYearFrom %}&creationYearFrom={{ filters.creationYearFrom }}{% endif %}{% if filters.creationYearTo %}&creationYearTo={{ filters.creationYearTo }}{% endif %}{% if filters.searchTerm %}&searchTerm={{ filters.searchTerm }}{% endif %}">Next</a>
        {% endif %}
    {% else %}
        <p>No artworks found.</p>
    {% endif %}
</div>
</body>
</html>
